﻿@using Microsoft.AspNetCore.Http

@{
    ViewData["Title"] = "Home Page";
    var givenName = User.Claims.FirstOrDefault(c => c.Type == "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname")?.Value;
    var surname = User.Claims.FirstOrDefault(c => c.Type == "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname")?.Value;
    var fullName = ((givenName ?? "") + " " + (surname ?? "")).Trim();
    var nameClaim = User.Claims.FirstOrDefault(c => c.Type == "name")?.Value;
    var emailClaim = User.Claims.FirstOrDefault(c => c.Type == "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress")?.Value;
    var displayName = !string.IsNullOrWhiteSpace(fullName) ? fullName
                    : !string.IsNullOrWhiteSpace(nameClaim) ? nameClaim
                    : emailClaim ?? User.Identity.Name;
}
<div class="text-center" style="margin-top: 60px;">
    @if (User.Identity.IsAuthenticated)
    {
        <h2>Welcome, @displayName!</h2>
    }
    else
    {
        <h1 style="font-weight:bold;">OKTA DEMO APP</h1>
    }
</div>